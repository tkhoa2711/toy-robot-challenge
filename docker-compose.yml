version: "3.8"

services:
  test:
    build: .
    working_dir: /app
    command:
      - sh
      - -ec
      - |
        pytest -cov
        flake8 .
        black --check .
    volumes:
      - .:/app

  program:
    build: .
    stdin_open: true
    tty: true
    working_dir: /app
    command: python -m toy_robot.main
    volumes:
      - .:/app
